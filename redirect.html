<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Authorization Code</title>
    <style>
        /* Bo tr√≤n khung c·ªßa <pre> v√† ƒëi·ªÅu ch·ªânh m√†u s·∫Øc */
        pre {
            position: relative;
            background: #d3d6db;
            padding: 10px;
            font-size: 15px;
            word-wrap: break-word;
            white-space: pre-wrap;
            border: 1px solid #e6e7e9;
            max-width: 500px;
            border-radius: 8px; /* Bo tr√≤n g√≥c c·ªßa khung */
            margin-top: 10px;
        }

        /* ƒê·ªãnh d·∫°ng n√∫t copy th√†nh bi·ªÉu t∆∞·ª£ng */
        .copy-button {
            position: absolute;
            top: 8px;
            right: 10px;
            cursor: pointer;
            color: #fff;
            background: gray;
            border-radius: 50%; /* Bo tr√≤n n√∫t copy */
            padding: 5px;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-family: Arial, sans-serif;
        }

        .copy-button:hover {
            background: #aaa; /* ƒê·ªïi m√†u khi hover */
        }
    </style>
</head>
<body>
    <h2>Your Authorization Code:</h2>
    
    <!-- X√≥a n·ªôi dung m·∫∑c ƒë·ªãnh trong <pre> tag -->
    <pre id="myPreTag"></pre>

    <script>
        // L·∫•y m√£ t·ª´ URL
        const params = new URLSearchParams(window.location.search);
        const code = params.get('code');

        // Hi·ªÉn th·ªã m√£ ho·∫∑c th√¥ng b√°o l·ªói trong <pre> tag
        const preTag = document.getElementById("myPreTag");
        if (code) {
            preTag.innerText = code;
        } else {
            preTag.innerText = "Authorization code not found in the URL.";
        }

        // T·∫°o n√∫t sao ch√©p v·ªõi bi·ªÉu t∆∞·ª£ng
        const copyButton = document.createElement("span");
        copyButton.innerText = "üìã"; // Bi·ªÉu t∆∞·ª£ng copy
        copyButton.classList.add("copy-button");

        // Th√™m n√∫t sao ch√©p v√†o <pre> tag
        preTag.appendChild(copyButton);

        // Th√™m s·ª± ki·ªán khi nh·∫•n n√∫t sao ch√©p
        copyButton.addEventListener("click", () => {
            // T·∫°m th·ªùi ·∫©n n√∫t sao ch√©p
            copyButton.style.display = "none";

            // T·∫°o m·ªôt range v√† ch·ªçn text trong <pre> tag
            const range = document.createRange();
            range.selectNode(preTag);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);

            try {
                // Sao ch√©p vƒÉn b·∫£n ƒë√£ ch·ªçn v√†o clipboard
                document.execCommand("copy");

                // Th√¥ng b√°o r·∫±ng ƒë√£ sao ch√©p th√†nh c√¥ng
                copyButton.innerText = "‚úì"; // Bi·ªÉu t∆∞·ª£ng check sau khi copy
                setTimeout(function(){
                    copyButton.innerText = "üìã"; // Quay l·∫°i bi·ªÉu t∆∞·ª£ng copy sau 2 gi√¢y
                }, 2000);
            } catch (err) {
                console.error("Unable to copy text:", err);
            } finally {
                // Hi·ªÉn th·ªã l·∫°i n√∫t sao ch√©p
                copyButton.style.display = "flex";

                // B·ªè ch·ªçn text
                window.getSelection().removeAllRanges();
            }
        });
    </script>
</body>
</html>
